(function(t){function e(e){for(var n,i,s=e[0],c=e[1],u=e[2],l=0,m=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(m.length)m.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},o=[];function i(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"6f0825a8"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(t){var e=[],a=r[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=r[t]=[e,n]}));e.push(a[2]=n);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(t);var u=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(l);var a=r[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,a[1](u)}r[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=u;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"37ee":function(t,e,a){"use strict";a("a20d")},4360:function(t,e,a){"use strict";var n=a("2b0e"),r=a("2f62"),o=a("1da1"),i=(a("d3b7"),a("96cf"),a("7338")),s=a.n(i),c={namespaced:!0,state:{token:null,user:null,archive:null},getters:{authenticated:function(t){return t.token&&t.user},user:function(t){return t.user},archive:function(t){return t.archive}},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_USER:function(t,e){t.user=e},SET_ARCHIVE:function(t,e){t.archive=e}},actions:{signUp:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.dispatch,a.prev=1,a.next=4,s.a.post("api/signup",e);case 4:return r=a.sent,a.next=7,n("attempt",r.data.jwt);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),alert(a.t0.response.data.error);case 12:case"end":return a.stop()}}),a,null,[[1,9]])})))()},logIn:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.dispatch,a.prev=1,a.next=4,s.a.post("api/login",e);case 4:return r=a.sent,a.next=7,n("attempt",r.data.jwt);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),alert(a.t0.response.data.error);case 12:case"end":return a.stop()}}),a,null,[[1,9]])})))()},attempt:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.commit,r=t.state,e&&n("SET_TOKEN",e),r.token){a.next=4;break}return a.abrupt("return");case 4:return a.prev=4,a.next=7,s.a.get("api");case 7:o=a.sent,n("SET_USER",o.data.user),n("SET_ARCHIVE",o.data.archive),console.log("riuscito!!!"),a.next=18;break;case 12:a.prev=12,a.t0=a["catch"](4),console.log("fail"),n("SET_TOKEN",null),n("SET_USER",null),n("SET_ARCHIVE",null);case 18:case"end":return a.stop()}}),a,null,[[4,12]])})))()},logOut:function(t){var e=t.commit;e("SET_TOKEN",null),e("SET_USER",null),e("SET_ARCHIVE",null)},forgotPassword:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s.a.post("api/forgotPassword",e);case 1:case"end":return t.stop()}}),t)})))()},resetPassword:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:fetch(location.pathname,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})});case 1:case"end":return t.stop()}}),t)})))()},deleteRun:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.commit,console.log(e),a.prev=2,a.next=5,s.a.delete("api/archive",{data:{id:e}});case 5:return a.next=7,s.a.get("api");case 7:r=a.sent,console.log(r),n("SET_ARCHIVE",r.data.archive),alert("Cancellato con successo!"),a.next=20;break;case 13:a.prev=13,a.t0=a["catch"](2),console.log(a.t0),alert("La cancellazione non è andata a buon fine!"),n("SET_TOKEN",null),n("SET_USER",null),n("SET_ARCHIVE",null);case 20:case"end":return a.stop()}}),a,null,[[2,13]])})))()}}},u={namespaced:!0,state:{startedCountdown:!1,startedStopwatch:!1,run:{meters:null,path:null,time:null,date:null}},getters:{startedCountdown:function(t){return t.startedCountdown},startedStopwatch:function(t){return t.startedStopwatch}},mutations:{CHANGE_STATUS_COUNTDOWN:function(t){t.startedCountdown=!t.startedCountdown},RESET_STATUS_COUNTDOWN:function(t){t.startedCountdown=!1},CHANGE_STATUS_STOPWATCH:function(t){t.startedStopwatch=!t.startedStopwatch},RESET_STATUS_STOPWATCH:function(t){t.startedStopwatch=!1},RESET_STATUS_ALL:function(t){t.startedStopwatch=!1,t.startedCountdown=!1,t.run.meters=null,t.run.path=null,t.run.time=null,t.run.date=null,console.log(t)},CHANGE_METERS:function(t,e){t.run.meters=e},CHANGE_PATH:function(t,e){t.run.path=e},CHANGE_TIME:function(t,e){t.run.time=e},CHANGE_DATE:function(t,e){t.run.date=e}},actions:{startCountdownHandling:function(t){var e=t.commit;e("CHANGE_STATUS_COUNTDOWN")},startStopwatchHandling:function(t){var e=t.commit;e("CHANGE_STATUS_STOPWATCH")},saveRun:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.commit,a.prev=1,a.next=4,s.a.post("api/archive",e);case 4:r=a.sent,l.commit("auth/SET_ARCHIVE",r.data.archive),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),alert(a.t0.response.data.error);case 11:n("RESET_STATUS_ALL",null);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()},reset:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,a("RESET_STATUS_ALL",null);case 2:case"end":return e.stop()}}),e)})))()},setMeters:function(t,e){var a=t.commit;a("CHANGE_METERS",e)},setPath:function(t,e){var a=t.commit;a("CHANGE_PATH",e)},setTime:function(t,e){var a=t.commit;a("CHANGE_TIME",e)},setDate:function(t,e){var a=t.commit;a("CHANGE_DATE",e)}}};n["a"].use(r["a"]);var l=e["a"]=new r["a"].Store({state:{},mutations:{},actions:{},modules:{auth:c,start:u}})},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("b0c0");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("Navigation"),a("v-main",[a("router-view")],1),a("Footer")],1)},o=[],i=a("4360"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",[a("v-app-bar",{attrs:{color:"deep-orange",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),a("v-toolbar-title",[t._v("Runaton")])],1),a("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"deep-orange--text text--accent-4"},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[a("v-list-item",{attrs:{to:"/"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-home")])],1),a("v-list-item-title",[t._v("Home")])],1),a("v-list-item",{attrs:{to:"/run"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-run-fast")])],1),a("v-list-item-title",[t._v("Run")])],1),t.authenticated?a("v-list-item",{attrs:{to:"/archivio"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-text-box-multiple-outline")])],1),a("v-list-item-title",[t._v("Archivio")])],1):t._e(),t.authenticated?a("v-list-item",{attrs:{to:"/account"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-account")])],1),a("v-list-item-title",[t._v("Account")])],1):t._e(),a("v-list-item",{attrs:{to:"/about"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-information-outline")])],1),a("v-list-item-title",[t._v("About")])],1),t.authenticated?t._e():a("v-list-item",{attrs:{to:"/signup"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-account-plus")])],1),a("v-list-item-title",[t._v("Signup")])],1),t.authenticated?t._e():a("v-list-item",{attrs:{to:"/login"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-account-arrow-left")])],1),a("v-list-item-title",[t._v("Login")])],1),t.authenticated?a("v-list-item",{on:{click:function(e){return e.preventDefault(),t.logOut(e)}}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-logout-variant")])],1),a("v-list-item-title",[t._v("Logout")])],1):t._e(),t.authenticated?a("v-list-item",[a("v-switch",{attrs:{hint:"Scorri a destra per abilitare la Dark Mode",inset:"",label:"Dark Mode","persistent-hint":""},model:{value:t.$vuetify.theme.dark,callback:function(e){t.$set(t.$vuetify.theme,"dark",e)},expression:"$vuetify.theme.dark"}})],1):t._e()],1)],1)],1)],1)},c=[],u=a("5530"),l=(a("ac1f"),a("5319"),a("2f62")),d={data:function(){return{drawer:!1,group:null}},computed:Object(u["a"])({},Object(l["c"])({authenticated:"auth/authenticated",user:"auth/user"})),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])({logOutAction:"auth/logOut"})),{},{logOut:function(){var t=this;this.logOutAction().then((function(){"Home"!==t.$route.name&&t.$router.replace({name:"Home"})}))}})},m=d,v=a("2877"),p=a("6544"),h=a.n(p),f=a("40dc"),b=a("5bc1"),w=a("132d"),g=a("8860"),_=a("da13"),x=a("1baa"),T=a("34c3"),S=a("5d23"),k=a("f774"),C=a("b73d"),O=a("2a7f"),E=Object(v["a"])(m,s,c,!1,null,null,null),j=E.exports;h()(E,{VAppBar:f["a"],VAppBarNavIcon:b["a"],VIcon:w["a"],VList:g["a"],VListItem:_["a"],VListItemGroup:x["a"],VListItemIcon:T["a"],VListItemTitle:S["a"],VNavigationDrawer:k["a"],VSwitch:C["a"],VToolbarTitle:O["a"]});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",{attrs:{dark:"",padless:""}},[a("v-card",{staticClass:"flex text-center",attrs:{flat:"",tile:""}},[a("v-card-title",{staticClass:"grey darken-4"},[a("strong",{staticClass:"subheading"},[t._v("Connettiti con noi sui social network!")]),a("v-spacer"),t._l(t.icons,(function(e){return a("v-btn",{key:e,staticClass:"mx-4",attrs:{dark:"",icon:""}},[a("v-icon",{attrs:{size:"24px"}},[t._v(" "+t._s(e)+" ")])],1)}))],2),a("v-card-text",{staticClass:"grey darken-4 white--text pt-0"},[t._v(" vast-retreat-83495.herokuapp.com/ - prodotto da Mihai Dragos Bocancea e Alessio Buccarella - © Tutti i diritti riservati. ")]),a("v-card-text",{staticClass:"deep-orange py-2 white--text text-center"},[t._v(" "+t._s((new Date).getFullYear())+" — "),a("strong",[t._v("Runaton")])])],1)],1)},A=[],V={data:function(){return{icons:["mdi-facebook","mdi-twitter","mdi-instagram"]}}},y=V,P=a("8336"),$=a("b0af"),H=a("99d9"),N=a("553a"),I=a("2fa4"),L=Object(v["a"])(y,R,A,!1,null,null,null),D=L.exports;h()(L,{VBtn:P["a"],VCard:$["a"],VCardText:H["b"],VCardTitle:H["c"],VFooter:N["a"],VIcon:w["a"],VSpacer:I["a"]});var M={store:i["a"],name:"App",components:{Navigation:j,Footer:D},data:function(){return{}}},U=M,F=a("7496"),z=a("f6c4"),G=Object(v["a"])(U,r,o,!1,null,null,null),B=G.exports;h()(G,{VApp:F["a"],VMain:z["a"]});a("d3b7"),a("3ca3"),a("ddb0");var q=a("8c4f"),W=a("bb51"),J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[t.authenticated?a("div",[t._v(" Runaton username account: "+t._s(t.user.username)+" "),a("br"),t._v(" Runaton email account: "+t._s(t.user.email)+" ")]):t._e(),a("br"),a("div",{staticClass:"text-center"},[a("strong",[a("Stopwatch")],1)]),a("div",{staticClass:"text-center"},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.startedCountdown,expression:"!startedCountdown"}],attrs:{color:"success",fab:"",elevation:"11","x-large":""},on:{click:function(e){return t.startCountdownHandling()}}},[a("v-icon",{attrs:{dark:""}},[t._v("mdi-play")])],1),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.startedCountdown,expression:"startedCountdown"}],attrs:{color:"error",fab:"",elevation:"11","x-large":""},on:{click:function(e){t.startedCountdown&&(t.startCountdownHandling(),t.startedStopwatch&&t.startStopwatchHandling())}}},[a("v-icon",{attrs:{dark:""}},[t._v("mdi-stop")])],1)],1),a("div",{staticClass:"text-center"},[a("strong",[a("Countdown")],1)]),a("br"),a("Tracking")],1)},K=[],Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"tempo"},domProps:{innerHTML:t._s(t.tempo)}})},Q=[],Z=(a("99af"),{name:"Stopwatch",data:function(){return{startTime:null,currentTime:null,interval:null}},watch:{startedStopwatch:function(t){t?this.start():this.stop()}},computed:{startedStopwatch:function(){return this.$store.state.start.startedStopwatch},startedCountdown:function(){return this.$store.state.start.startedCountdown},tempo:function(){return this.startedCountdown&&!this.startedStopwatch?(this.reset(),"".concat(this.ore,":").concat(this.minuti,":").concat(this.secondi,".").concat(this.decimi)):"".concat(this.ore,":").concat(this.minuti,":").concat(this.secondi,".").concat(this.decimi)},ore:function(){var t=this.millisecondi,e=Math.floor(t/36e5);return this.formatTime(e)},minuti:function(){var t=this.millisecondi,e=Math.floor(t/6e4%60);return this.formatTime(e)},secondi:function(){var t=this.millisecondi,e=Math.floor(t/1e3%60);return this.formatTime(e)},decimi:function(){var t=this.millisecondi,e=Math.floor(t%1e3/10);return this.formatTime(e)},millisecondi:function(){return this.currentTime-this.startTime}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])({setTime:"start/setTime"})),{},{start:function(){this.startTime=Date.now(),this.currentTime=Date.now(),this.interval=setInterval(this.updateCurrentTime,20)},reset:function(){this.startTime=Date.now(),this.currentTime=Date.now()},stop:function(){clearInterval(this.interval),this.setTime("".concat(this.ore,":").concat(this.minuti,":").concat(this.secondi,".").concat(this.decimi)),console.log(this.$store.state.start.runtime)},updateCurrentTime:function(){this.currentTime=Date.now()},formatTime:function(t){return t>9?t:"0".concat(t)}})}),X=Z,tt=Object(v["a"])(X,Y,Q,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"countdown"},domProps:{innerHTML:t._s(t.countdown)}})},nt=[],rt={name:"Countdown",data:function(){return{countdownTime:null,currentTime:null,interval:null}},watch:{startedCountdown:function(t){return t?this.start():this.stop()}},computed:{startedCountdown:function(){return this.$store.state.start.startedCountdown},countdown:function(){return this.startedCountdown?this.secondi:""},secondi:function(){var t=this.millisecondi,e=Math.floor(t/1e3);return this.startedCountdown&&this.millisecondi<=1e3?"VIA!":"Parti tra: ".concat(e)},millisecondi:function(){return this.countdownTime-this.currentTime}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])({startStopwatchHandling:"start/startStopwatchHandling"})),{},{start:function(){this.countdownTime=Date.now()+5999,this.currentTime=Date.now(),this.interval=setInterval(this.updateCurrentTime,20)},reset:function(){this.$data.startTime=Date.now(),this.$data.currentTime=Date.now()},stop:function(){clearInterval(this.interval)},updateCurrentTime:function(){this.currentTime=Date.now(),this.millisecondi<=1e3&&(this.stop(),this.startStopwatchHandling())}})},ot=rt,it=Object(v["a"])(ot,at,nt,!1,null,null,null),st=it.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.startedStopwatch&&!t.startedCountdown,expression:"!startedStopwatch && !startedCountdown"}],staticStyle:{width:"100% !important",height:"500px !important"},attrs:{elevation:"2",id:"map"}}),!t.authenticated||t.startedStopwatch||t.startedCountdown?t._e():a("v-btn",{attrs:{color:"success"},on:{click:function(e){t.saveRun(t.$store.state.start.run),t.meters=0}}},[t._v("Salva corsa")]),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.startedStopwatch&&!t.startedCountdown&&t.meters>0,expression:"!startedStopwatch && !startedCountdown && meters > 0"}],attrs:{color:"info"},on:{click:function(e){t.reset(),t.meters=0}}},[t._v("Resetta")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.meters>0,expression:"meters > 0"}]},[t._v(t._s(t.realtime_meters))])],1)},ut=[],lt=a("1da1"),dt=(a("96cf"),a("d81d"),a("b680"),a("e192")),mt=a.n(dt),vt=[],pt=[],ht={id:void 0};n["a"].use(ht),n["a"].use(mt.a);var ft={name:"Tracking",data:function(){return{soglia:"",meters:"",realtime_meters:"",map:""}},created:function(){this.soglia=0,this.meters=0,this.map="",this.realtime_meters=""},watch:{startedStopwatch:function(t){return t?this.trackPosition():this.stopTracking()}},computed:Object(u["a"])(Object(u["a"])({},Object(l["c"])({authenticated:"auth/authenticated",user:"auth/user"})),{},{startedStopwatch:function(){return this.$store.state.start.startedStopwatch},startedCountdown:function(){return this.$store.state.start.startedStopwatch}}),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])({reset:"start/reset",setPath:"start/setPath",setMeters:"start/setMeters",setDate:"start/setDate",saveRun:"start/saveRun"})),{},{trackPosition:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(navigator.geolocation){t.next=3;break}return alert("Localizzazione GPS non autorizzata o non supportata!"),t.abrupt("return");case 3:return t.prev=3,t.next=6,navigator.wakeLock.request("screen");case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t["catch"](3),console.log("".concat(t.t0.name,", ").concat(t.t0.message)),alert("Questo browser non supporta questa funzionalità. Attualmente Chrome, Edge e Opera sono i browser supportati"),t.abrupt("return");case 13:vt=[],ht.id=navigator.geolocation.watchPosition(this.successPosition,this.failurePosition,{enableHighAccuracy:!0,timeout:1/0,maximumAge:5e3});case 15:case"end":return t.stop()}}),t,this,[[3,8]])})));function e(){return t.apply(this,arguments)}return e}(),successPosition:function(t){(this.soglia+=1)>5&&t.coords.accuracy<20&&(vt.push([t.coords.longitude,t.coords.latitude]),pt.push([t.coords.longitude,t.coords.latitude]),pt.length>1&&(this.meters+=this.realtimeMeters(pt),this.realtimeMetersPrint(this.meters),pt.shift(),console.log(this.meters)),console.log(vt),console.log(t.coords.accuracy))},failurePosition:function(t){alert("Codice di errore: "+t.code+"Messaggio di errore: "+t.message),navigator.geolocation.clearWatch(ht.id),vt=[]},stopTracking:function(){navigator.geolocation.clearWatch(ht.id),this.setPath(vt),this.setMeters(this.meters),this.setDate(Date.now()),console.log(this.$store.state.start.run.path),console.log(this.$store.state.start.run.meters),console.log(this.$store.state.start.run.date),console.log(this.$store.state.start.run),this.drawMap()},drawMap:function(){var t=this,e=vt.length;this.soglia=0,e>1&&(mt.a.accessToken="pk.eyJ1IjoiYm9jYW5jZWExNzY0MjA1IiwiYSI6ImNrb2JqYzhmcTA4bjMycG4yNnpid2t4cmoifQ.iidVnJSybWrLpLgQQGWiaQ",this.map=new mt.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:vt[Math.floor(vt.length/2)],zoom:15}),this.map.on("dataloading",(function(){window.dispatchEvent(new Event("resize"))})),this.map.on("load",(function(){t.map.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:vt}}}),t.map.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f26958","line-width":8}})})))},realtimeMeters:function(t){if(t[0][0]!==t[1][0]&&t[0][1]!==t[1][1]){var e=new mt.a.LngLat(t[0][0],t[0][1]),a=new mt.a.LngLat(t[1][0],t[1][1]);return e.distanceTo(a)}return 0},realtimeMetersPrint:function(t){var e=Math.floor(t);this.realtime_meters=e>=1e3?"".concat((e/1e3).toFixed(3)," km"):e>1?"".concat(e," metri"):1===e?"1 metro":"0 metri"}})},bt=ft,wt=(a("37ee"),Object(v["a"])(bt,ct,ut,!1,null,null,null)),gt=wt.exports;h()(wt,{VApp:F["a"],VBtn:P["a"],VCard:$["a"]}),n["a"].use(gt);var _t={store:i["a"],components:{Stopwatch:et,Countdown:st,Tracking:gt},data:function(){return{}},name:"Run",computed:Object(u["a"])({},Object(l["c"])({authenticated:"auth/authenticated",user:"auth/user",startedStopwatch:"start/startedStopwatch",startedCountdown:"start/startedCountdown"})),methods:Object(u["a"])({},Object(l["b"])({startStopwatchHandling:"start/startStopwatchHandling",startCountdownHandling:"start/startCountdownHandling"}))},xt=_t,Tt=Object(v["a"])(xt,J,K,!1,null,null,null),St=Tt.exports;h()(Tt,{VApp:F["a"],VBtn:P["a"],VIcon:w["a"]});var kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("h1",{staticClass:"text-center"},[t._v("Signup")]),a("v-divider"),a("br"),a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{type:"text",counter:10,rules:t.nameRules,label:"Username",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),a("v-text-field",{attrs:{type:"email",rules:t.emailRules,label:"E-mail",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),a("v-text-field",{attrs:{type:"password",counter:15,rules:t.pwRules,label:"Password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),a("v-checkbox",{attrs:{rules:[function(t){return!!t||"Devi accettare per continuare!"}],label:"Do you agree?",required:""},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"success"},on:{click:function(e){t.validate(),t.submit()}}},[a("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-account-plus-outline ")]),t._v("Signup")],1),a("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.reset}},[a("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-close-box-outline ")]),t._v("Reset Signup")],1),a("br"),a("br"),a("router-link",{attrs:{to:"/forgotPassword"}},[t._v("Password dimenticata?")]),a("br"),a("router-link",{attrs:{to:"/login"}},[t._v("Hai già un account? Fai il login!")]),t._v(" "+t._s(t.error)+" ")],1)],1)],1)},Ct=[],Ot={name:"Signup",data:function(){return{valid:!0,nameRules:[function(t){return!!t||"Username obbligatorio"},function(t){return t&&t.length<=10||"Username deve contenere meno di 10 caratteri"}],emailRules:[function(t){return!!t||"E-mail obbligatoria"},function(t){return/.+@.+\..+/.test(t)||"E-mail deve essere valida"}],pwRules:[function(t){return!!t||"Password obbligatoria"},function(t){return t&&t.length<=15||"Password deve contenere meno di 15 caratteri"},function(t){return/(?=.*[A-Z])/.test(t)||"Password deve avere almeno una maiuscola"},function(t){return/(?=.*\d)/.test(t)||"Password deve avere almeno un numero"},function(t){return/([!@$%])/.test(t)||"Password deve avere almeno un carattere speciale [!@#$%]"}],select:null,checkbox:!1,form:{username:"",email:"",password:""},error:""}},computed:Object(u["a"])({},Object(l["c"])({authenticated:"auth/authenticated"})),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])({signUp:"auth/signUp"})),{},{submit:function(){var t=this;this.signUp(this.form).then((function(){t.authenticated&&t.$router.replace({name:"Run"})}))},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()}})},Et=Ot,jt=a("ac7c"),Rt=a("a523"),At=a("ce7e"),Vt=a("4bd4"),yt=a("8654"),Pt=Object(v["a"])(Et,kt,Ct,!1,null,null,null),$t=Pt.exports;h()(Pt,{VApp:F["a"],VBtn:P["a"],VCheckbox:jt["a"],VContainer:Rt["a"],VDivider:At["a"],VForm:Vt["a"],VIcon:w["a"],VTextField:yt["a"]});var Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("h1",{staticClass:"text-center"},[t._v("Login")]),a("v-divider"),a("br"),a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{type:"text",rules:t.nameRules,label:"Username",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),a("v-text-field",{attrs:{type:"password",rules:t.pwRules,label:"Password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"success"},on:{click:t.submit}},[a("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-account-arrow-left-outline ")]),t._v("Login")],1),a("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.reset}},[a("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-close-box-outline ")]),t._v("Reset Login")],1),a("br"),a("br"),a("router-link",{attrs:{to:"/forgotPassword"}},[t._v("Password dimenticata?")]),a("br"),a("router-link",{attrs:{to:"/signup"}},[t._v("Non hai un account? Registrati!")]),t._v(" "+t._s(t.error)+" ")],1)],1)],1)},Nt=[],It={name:"Login",data:function(){return{form:{username:"",password:""},error:""}},computed:Object(u["a"])({},Object(l["c"])({authenticated:"auth/authenticated"})),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])({logIn:"auth/logIn"})),{},{submit:function(){var t=this;this.logIn(this.form).then((function(){t.authenticated&&t.$router.replace({name:"Run"})}))},reset:function(){this.$refs.form.reset()}})},Lt=It,Dt=Object(v["a"])(Lt,Ht,Nt,!1,null,null,null),Mt=Dt.exports;h()(Dt,{VApp:F["a"],VBtn:P["a"],VContainer:Rt["a"],VDivider:At["a"],VForm:Vt["a"],VIcon:w["a"],VTextField:yt["a"]});var Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("h1",{staticClass:"text-center"},[t._v("Il mio archivio")]),a("v-divider"),a("br"),a("v-container",{attrs:{"spacing-playground":"","pa-3":""}},[a("div",[a("v-expansion-panels",t._l(t.archive,(function(e,n){return a("v-expansion-panel",{key:e._id,attrs:{index:n}},[a("v-expansion-panel-header",[a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{cols:"6",sm:"3"}},[a("v-icon",[t._v("mdi-calendar-range")]),t._v(" "+t._s(new Date(e.date).toLocaleDateString("it-IT")))],1),a("v-col",{attrs:{cols:"6",sm:"3"}},[a("v-icon",[t._v("mdi-shoe-print")]),t._v(" "+t._s(e.meters))],1),a("v-col",{attrs:{cols:"6",sm:"3"}},[a("v-icon",[t._v("mdi-timer")]),t._v(" "+t._s(e.time)+" ")],1),a("v-col",{attrs:{cols:"6",sm:"3"}},[a("v-bottom-sheet",{attrs:{inset:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[a("v-btn",t._g(t._b({attrs:{depressed:"",color:"red white--text",dark:""},nativeOn:{click:function(a){return a.stopPropagation(),t.deleteRunAction(e._id)}}},"v-btn",o,!1),r),[a("v-icon",[t._v("mdi-trash-can-outline")])],1)]}}],null,!0),model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[a("v-sheet",{staticClass:"text-center",attrs:{height:"130px"}},[a("v-btn",{staticClass:"mt-6",attrs:{text:"",color:"error"},on:{click:function(e){t.sheet=!t.sheet}}},[a("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-close-circle ")]),t._v(" close ")],1),a("div",{staticClass:"my-3"},[a("v-icon",[t._v("mdi-checkbox-marked-circle-outline")]),t._v(" Corsa eliminata con successo! ")],1)],1)],1)],1)],1)],1),a("v-expansion-panel-content",[t._v(" v-card ")])],1)})),1)],1)])],1)},Ft=[],zt=(a("07ac"),{name:"Archivio",data:function(){return{sheet:!1}},watch:{archive:function(){return this.$store.state.auth.archive?Object.values(this.$store.state.auth.archive):""}},computed:Object(u["a"])({},Object(l["c"])({archive:"auth/archive"})),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])({deleteRun:"auth/deleteRun"})),{},{deleteRunAction:function(t){this.deleteRun(t)}})}),Gt=zt,Bt=a("288c"),qt=a("62ad"),Wt=a("cd55"),Jt=a("49e2"),Kt=a("c865"),Yt=a("0393"),Qt=a("0fd9"),Zt=a("8dd9"),Xt=Object(v["a"])(Gt,Ut,Ft,!1,null,null,null),te=Xt.exports;h()(Xt,{VApp:F["a"],VBottomSheet:Bt["a"],VBtn:P["a"],VCol:qt["a"],VContainer:Rt["a"],VDivider:At["a"],VExpansionPanel:Wt["a"],VExpansionPanelContent:Jt["a"],VExpansionPanelHeader:Kt["a"],VExpansionPanels:Yt["a"],VIcon:w["a"],VRow:Qt["a"],VSheet:Zt["a"]});var ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[t.authenticated?a("div",[a("h1",{staticClass:"text-center"},[t._v("Il mio account")])]):t._e(),a("v-divider"),a("br")],1)},ae=[],ne={name:"Account",computed:Object(u["a"])({},Object(l["c"])({authenticated:"auth/authenticated",user:"auth/user"}))},re=ne,oe=Object(v["a"])(re,ee,ae,!1,null,null,null),ie=oe.exports;h()(oe,{VApp:F["a"],VDivider:At["a"]});var se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("h1",{staticClass:"text-center"},[t._v("Resetta password")]),a("v-divider"),a("br"),a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{type:"email",rules:t.emailRules,label:"E-mail",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"success"},on:{click:t.submit}},[t._v("Invia email")]),t._v(" "+t._s(t.error)+" ")],1)],1)],1)},ce=[],ue={name:"Forgot",data:function(){return{valid:!0,emailRules:[function(t){return!!t||"E-mail obbligatoria"},function(t){return/.+@.+\..+/.test(t)||"E-mail deve essere valida"}],select:null,form:{email:""},error:""}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])({forgotPassword:"auth/forgotPassword"})),{},{submit:function(){var t=this;this.forgotPassword(this.form).then((function(){t.$router.replace({name:"Home"})}))}})},le=ue,de=Object(v["a"])(le,se,ce,!1,null,null,null),me=de.exports;h()(de,{VApp:F["a"],VBtn:P["a"],VContainer:Rt["a"],VDivider:At["a"],VForm:Vt["a"],VTextField:yt["a"]});var ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{type:"password",counter:10,rules:t.pwRules,label:"Nuova password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"success"},on:{click:t.submit}},[t._v("Resetta la password")]),t._v(" "+t._s(t.error)+" ")],1)],1)],1)},pe=[],he={name:"Reset",data:function(){return{valid:!0,pwRules:[function(t){return!!t||"Nuova password obbligatoria"},function(t){return t&&t.length>=5||"Nuova password deve avere almeno 5 caratteri"},function(t){return/(?=.*[A-Z])/.test(t)||"Nuova password deve avere una maiuscola"},function(t){return/(?=.*\d)/.test(t)||"Nuova password deve avere un numero"},function(t){return/([!@$%])/.test(t)||"Nuova password deve avere un carattere speciale [!@#$%]"}],select:null,form:{password:""},error:""}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])({resetPassword:"auth/resetPassword"})),{},{submit:function(){var t=this;this.resetPassword(this.form.password).then((function(){t.$router.replace({name:"Home"})}))}})},fe=he,be=Object(v["a"])(fe,ve,pe,!1,null,null,null),we=be.exports;h()(be,{VApp:F["a"],VBtn:P["a"],VContainer:Rt["a"],VForm:Vt["a"],VTextField:yt["a"]}),n["a"].use(q["a"]);var ge=[{path:"/",name:"Home",component:W["default"]},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/login",name:"Login",component:Mt},{path:"/signup",name:"Signup",component:$t},{path:"/run",name:"Run",component:St},{path:"/archivio",name:"Archivio",component:te},{path:"/account",name:"Account",component:ie},{path:"/forgotPassword",name:"Forgot",component:me},{path:"/resetPassword/:token",name:"Reset",component:we}],_e=new q["a"]({mode:"history",base:"/",routes:ge}),xe=_e,Te=a("f309"),Se=a("fcf4");n["a"].use(Te["a"]);var ke=new Te["a"]({icons:{iconfont:"mdiSvg"},themes:{light:{primary:Se["a"].red.darken1,secondary:Se["a"].red.lighten4,accent:Se["a"].indigo.base}}});a("66c6"),xe.beforeEach((function(t,e,a){i["a"].commit("start/RESET_STATUS_ALL"),!i["a"].getters["auth/authenticated"]||"Login"!==t.name&&"Signup"!==t.name&&"Reset"!==t.name&&"Forgot"!==t.name?a():a(!1),i["a"].getters["auth/authenticated"]||"Login"===t.name||"Signup"===t.name||"Run"===t.name||"Home"===t.name||"About"===t.name||"Reset"===t.name||"Forgot"===t.name?a():a({name:"Home"})})),n["a"].config.productionTip=!1,i["a"].dispatch("auth/attempt",localStorage.getItem("token")).then((function(){new n["a"]({store:i["a"],router:xe,vuetify:ke,render:function(t){return t(B)}}).$mount("#app")}))},"66c6":function(t,e,a){"use strict";a.r(e);var n=a("4360"),r=a("7338"),o=a.n(r);n["a"].subscribe((function(t){switch(t.type){case"auth/SET_TOKEN":t.payload?(o.a.defaults.headers.common["Authorization"]="Bearer ".concat(t.payload),localStorage.setItem("token",t.payload)):(o.a.defaults.headers.common["Authorization"]=null,localStorage.removeItem("token"));break}}))},"7ad4":function(t,e,a){"use strict";var n=a("9cae"),r=a.n(n);e["default"]=r.a},"9cae":function(t,e){},a20d:function(t,e,a){},bb51:function(t,e,a){"use strict";var n=a("eff6"),r=a("7ad4"),o=a("2877"),i=a("6544"),s=a.n(i),c=a("7496"),u=a("ce7e"),l=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=l.exports,s()(l,{VApp:c["a"],VDivider:u["a"]})},eff6:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("h1",{staticClass:"text-center"},[t._v("Runaton - Simple run tracker")]),a("v-divider"),a("br")],1)},r=[]}});
//# sourceMappingURL=app.ac82dbde.js.map